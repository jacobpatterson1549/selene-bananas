CREATE OR REPLACE FUNCTION user_delete
	( INOUT username VARCHAR
	, IN password CHAR
	) RETURNS SETOF VARCHAR
AS
$$
	WITH deleted AS
		(
		DELETE
		FROM users
		AS u
		WHERE u.username = user_delete.username
			AND u.password = user_delete.password
		RETURNING u.username
		)
	SELECT username
	FROM deleted
$$
LANGUAGE SQL;
